{
  "openapi": "3.0.0",
  "info": {
    "version": "1.0.0",
    "title": "Keres API",
    "description": "API for the Keres Story Organizer application."
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {

    },
    "parameters": {

    }
  },
  "paths": {
    "/users/register": {
      "post": {
        "summary": "Register a new user",
        "description": "Registers a new user with a username and password.",
        "tags": [
          "Users"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string",
                    "minLength": 3
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6
                  }
                },
                "required": [
                  "username",
                  "password"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "username": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "token": {
                      "type": "string"
                    },
                    "refreshToken": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "username",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/users/login": {
      "post": {
        "summary": "Authenticate user login",
        "description": "Authenticates a user and returns a token (or success message).",
        "tags": [
          "Users"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                },
                "required": [
                  "username",
                  "password"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "username": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "token": {
                      "type": "string"
                    },
                    "refreshToken": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "username",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/users/refresh-token": {
      "post": {
        "summary": "Refresh access token",
        "description": "Exchanges a valid refresh token for a new access token.",
        "tags": [
          "Users"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "refreshToken": {
                    "type": "string"
                  }
                },
                "required": [
                  "refreshToken"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Access token refreshed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "token"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/users/profile/{id}": {
      "get": {
        "summary": "Get user profile by ID",
        "description": "Retrieves a user's profile information by their unique ID.",
        "tags": [
          "Users"
        ],
        "security": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "User profile retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "username": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "token": {
                      "type": "string"
                    },
                    "refreshToken": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "username",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/stories": {
      "post": {
        "summary": "Create a new story",
        "description": "Creates a new story.",
        "tags": [
          "Stories"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": {
                    "type": "string"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "linear",
                      "branching"
                    ],
                    "default": "linear"
                  },
                  "title": {
                    "type": "string",
                    "minLength": 1
                  },
                  "summary": {
                    "type": "string"
                  },
                  "genre": {
                    "type": "string"
                  },
                  "language": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                },
                "required": [
                  "userId",
                  "title"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Story created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "userId": {
                      "type": "string"
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "linear",
                        "branching"
                      ]
                    },
                    "title": {
                      "type": "string"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "genre": {
                      "type": "string",
                      "nullable": true
                    },
                    "language": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "characters": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "gender": {
                            "type": "string",
                            "nullable": true
                          },
                          "race": {
                            "type": "string",
                            "nullable": true
                          },
                          "subrace": {
                            "type": "string",
                            "nullable": true
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "personality": {
                            "type": "string",
                            "nullable": true
                          },
                          "motivation": {
                            "type": "string",
                            "nullable": true
                          },
                          "qualities": {
                            "type": "string",
                            "nullable": true
                          },
                          "weaknesses": {
                            "type": "string",
                            "nullable": true
                          },
                          "biography": {
                            "type": "string",
                            "nullable": true
                          },
                          "plannedTimeline": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "relations": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "charId1": {
                                  "type": "string"
                                },
                                "charId2": {
                                  "type": "string"
                                },
                                "relationType": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "relatedCharacter": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string"
                                    },
                                    "name": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "name"
                                  ]
                                }
                              },
                              "required": [
                                "id",
                                "charId1",
                                "charId2",
                                "relationType",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "gender",
                          "race",
                          "subrace",
                          "description",
                          "personality",
                          "motivation",
                          "qualities",
                          "weaknesses",
                          "biography",
                          "plannedTimeline",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "chapters": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "scenes": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "chapterId": {
                                  "type": "string"
                                },
                                "locationId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "gap": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "duration": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "moments": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      },
                                      "location": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "index": {
                                        "type": "integer"
                                      },
                                      "summary": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "isFavorite": {
                                        "type": "boolean"
                                      },
                                      "extraNotes": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "name",
                                      "location",
                                      "index",
                                      "summary",
                                      "isFavorite",
                                      "extraNotes",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                },
                                "choices": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "nextSceneId": {
                                        "type": "string"
                                      },
                                      "text": {
                                        "type": "string"
                                      },
                                      "isImplicit": {
                                        "type": "boolean"
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "nextSceneId",
                                      "text",
                                      "isImplicit",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "chapterId",
                                "locationId",
                                "name",
                                "index",
                                "summary",
                                "gap",
                                "duration",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "locations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "climate": {
                            "type": "string",
                            "nullable": true
                          },
                          "culture": {
                            "type": "string",
                            "nullable": true
                          },
                          "politics": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "scenes": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "chapterId": {
                                  "type": "string"
                                },
                                "locationId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "gap": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "duration": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "moments": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      },
                                      "location": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "index": {
                                        "type": "integer"
                                      },
                                      "summary": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "isFavorite": {
                                        "type": "boolean"
                                      },
                                      "extraNotes": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "name",
                                      "location",
                                      "index",
                                      "summary",
                                      "isFavorite",
                                      "extraNotes",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                },
                                "choices": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "nextSceneId": {
                                        "type": "string"
                                      },
                                      "text": {
                                        "type": "string"
                                      },
                                      "isImplicit": {
                                        "type": "boolean"
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "nextSceneId",
                                      "text",
                                      "isImplicit",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "chapterId",
                                "locationId",
                                "name",
                                "index",
                                "summary",
                                "gap",
                                "duration",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "description",
                          "climate",
                          "culture",
                          "politics",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "userId",
                    "type",
                    "title",
                    "summary",
                    "genre",
                    "language",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/stories/all": {
      "get": {
        "summary": "Get stories by user ID",
        "description": "Retrieves all stories belonging to a specific user.",
        "tags": [
          "Stories"
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Stories retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "userId": {
                            "type": "string"
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "linear",
                              "branching"
                            ]
                          },
                          "title": {
                            "type": "string"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "genre": {
                            "type": "string",
                            "nullable": true
                          },
                          "language": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "characters": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "storyId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "gender": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "race": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "subrace": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "description": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "personality": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "motivation": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "qualities": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "weaknesses": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "biography": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "plannedTimeline": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "moments": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      },
                                      "location": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "index": {
                                        "type": "integer"
                                      },
                                      "summary": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "isFavorite": {
                                        "type": "boolean"
                                      },
                                      "extraNotes": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "name",
                                      "location",
                                      "index",
                                      "summary",
                                      "isFavorite",
                                      "extraNotes",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                },
                                "relations": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "charId1": {
                                        "type": "string"
                                      },
                                      "charId2": {
                                        "type": "string"
                                      },
                                      "relationType": {
                                        "type": "string"
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "relatedCharacter": {
                                        "type": "object",
                                        "properties": {
                                          "id": {
                                            "type": "string"
                                          },
                                          "name": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "id",
                                          "name"
                                        ]
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "charId1",
                                      "charId2",
                                      "relationType",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "storyId",
                                "name",
                                "gender",
                                "race",
                                "subrace",
                                "description",
                                "personality",
                                "motivation",
                                "qualities",
                                "weaknesses",
                                "biography",
                                "plannedTimeline",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "chapters": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "storyId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "scenes": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "chapterId": {
                                        "type": "string"
                                      },
                                      "locationId": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      },
                                      "index": {
                                        "type": "integer"
                                      },
                                      "summary": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "gap": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "duration": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "isFavorite": {
                                        "type": "boolean"
                                      },
                                      "extraNotes": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "moments": {
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "id": {
                                              "type": "string"
                                            },
                                            "sceneId": {
                                              "type": "string"
                                            },
                                            "name": {
                                              "type": "string"
                                            },
                                            "location": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "index": {
                                              "type": "integer"
                                            },
                                            "summary": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "isFavorite": {
                                              "type": "boolean"
                                            },
                                            "extraNotes": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "createdAt": {
                                              "type": "string",
                                              "format": "date"
                                            },
                                            "updatedAt": {
                                              "type": "string",
                                              "format": "date"
                                            }
                                          },
                                          "required": [
                                            "id",
                                            "sceneId",
                                            "name",
                                            "location",
                                            "index",
                                            "summary",
                                            "isFavorite",
                                            "extraNotes",
                                            "createdAt",
                                            "updatedAt"
                                          ]
                                        }
                                      },
                                      "choices": {
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "id": {
                                              "type": "string"
                                            },
                                            "sceneId": {
                                              "type": "string"
                                            },
                                            "nextSceneId": {
                                              "type": "string"
                                            },
                                            "text": {
                                              "type": "string"
                                            },
                                            "isImplicit": {
                                              "type": "boolean"
                                            },
                                            "createdAt": {
                                              "type": "string",
                                              "format": "date"
                                            },
                                            "updatedAt": {
                                              "type": "string",
                                              "format": "date"
                                            }
                                          },
                                          "required": [
                                            "id",
                                            "sceneId",
                                            "nextSceneId",
                                            "text",
                                            "isImplicit",
                                            "createdAt",
                                            "updatedAt"
                                          ]
                                        }
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "chapterId",
                                      "locationId",
                                      "name",
                                      "index",
                                      "summary",
                                      "gap",
                                      "duration",
                                      "isFavorite",
                                      "extraNotes",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "storyId",
                                "name",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "locations": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "storyId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "description": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "climate": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "culture": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "politics": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "scenes": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "chapterId": {
                                        "type": "string"
                                      },
                                      "locationId": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      },
                                      "index": {
                                        "type": "integer"
                                      },
                                      "summary": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "gap": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "duration": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "isFavorite": {
                                        "type": "boolean"
                                      },
                                      "extraNotes": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "moments": {
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "id": {
                                              "type": "string"
                                            },
                                            "sceneId": {
                                              "type": "string"
                                            },
                                            "name": {
                                              "type": "string"
                                            },
                                            "location": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "index": {
                                              "type": "integer"
                                            },
                                            "summary": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "isFavorite": {
                                              "type": "boolean"
                                            },
                                            "extraNotes": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "createdAt": {
                                              "type": "string",
                                              "format": "date"
                                            },
                                            "updatedAt": {
                                              "type": "string",
                                              "format": "date"
                                            }
                                          },
                                          "required": [
                                            "id",
                                            "sceneId",
                                            "name",
                                            "location",
                                            "index",
                                            "summary",
                                            "isFavorite",
                                            "extraNotes",
                                            "createdAt",
                                            "updatedAt"
                                          ]
                                        }
                                      },
                                      "choices": {
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "id": {
                                              "type": "string"
                                            },
                                            "sceneId": {
                                              "type": "string"
                                            },
                                            "nextSceneId": {
                                              "type": "string"
                                            },
                                            "text": {
                                              "type": "string"
                                            },
                                            "isImplicit": {
                                              "type": "boolean"
                                            },
                                            "createdAt": {
                                              "type": "string",
                                              "format": "date"
                                            },
                                            "updatedAt": {
                                              "type": "string",
                                              "format": "date"
                                            }
                                          },
                                          "required": [
                                            "id",
                                            "sceneId",
                                            "nextSceneId",
                                            "text",
                                            "isImplicit",
                                            "createdAt",
                                            "updatedAt"
                                          ]
                                        }
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "chapterId",
                                      "locationId",
                                      "name",
                                      "index",
                                      "summary",
                                      "gap",
                                      "duration",
                                      "isFavorite",
                                      "extraNotes",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "storyId",
                                "name",
                                "description",
                                "climate",
                                "culture",
                                "politics",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "userId",
                          "type",
                          "title",
                          "summary",
                          "genre",
                          "language",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/stories/{id}": {
      "get": {
        "summary": "Get a story by ID",
        "description": "Retrieves a single story by its unique ID.",
        "tags": [
          "Stories"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "include",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Story retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "userId": {
                      "type": "string"
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "linear",
                        "branching"
                      ]
                    },
                    "title": {
                      "type": "string"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "genre": {
                      "type": "string",
                      "nullable": true
                    },
                    "language": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "characters": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "gender": {
                            "type": "string",
                            "nullable": true
                          },
                          "race": {
                            "type": "string",
                            "nullable": true
                          },
                          "subrace": {
                            "type": "string",
                            "nullable": true
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "personality": {
                            "type": "string",
                            "nullable": true
                          },
                          "motivation": {
                            "type": "string",
                            "nullable": true
                          },
                          "qualities": {
                            "type": "string",
                            "nullable": true
                          },
                          "weaknesses": {
                            "type": "string",
                            "nullable": true
                          },
                          "biography": {
                            "type": "string",
                            "nullable": true
                          },
                          "plannedTimeline": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "relations": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "charId1": {
                                  "type": "string"
                                },
                                "charId2": {
                                  "type": "string"
                                },
                                "relationType": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "relatedCharacter": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string"
                                    },
                                    "name": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "name"
                                  ]
                                }
                              },
                              "required": [
                                "id",
                                "charId1",
                                "charId2",
                                "relationType",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "gender",
                          "race",
                          "subrace",
                          "description",
                          "personality",
                          "motivation",
                          "qualities",
                          "weaknesses",
                          "biography",
                          "plannedTimeline",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "chapters": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "scenes": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "chapterId": {
                                  "type": "string"
                                },
                                "locationId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "gap": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "duration": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "moments": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      },
                                      "location": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "index": {
                                        "type": "integer"
                                      },
                                      "summary": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "isFavorite": {
                                        "type": "boolean"
                                      },
                                      "extraNotes": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "name",
                                      "location",
                                      "index",
                                      "summary",
                                      "isFavorite",
                                      "extraNotes",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                },
                                "choices": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "nextSceneId": {
                                        "type": "string"
                                      },
                                      "text": {
                                        "type": "string"
                                      },
                                      "isImplicit": {
                                        "type": "boolean"
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "nextSceneId",
                                      "text",
                                      "isImplicit",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "chapterId",
                                "locationId",
                                "name",
                                "index",
                                "summary",
                                "gap",
                                "duration",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "locations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "climate": {
                            "type": "string",
                            "nullable": true
                          },
                          "culture": {
                            "type": "string",
                            "nullable": true
                          },
                          "politics": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "scenes": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "chapterId": {
                                  "type": "string"
                                },
                                "locationId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "gap": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "duration": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "moments": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      },
                                      "location": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "index": {
                                        "type": "integer"
                                      },
                                      "summary": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "isFavorite": {
                                        "type": "boolean"
                                      },
                                      "extraNotes": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "name",
                                      "location",
                                      "index",
                                      "summary",
                                      "isFavorite",
                                      "extraNotes",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                },
                                "choices": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "nextSceneId": {
                                        "type": "string"
                                      },
                                      "text": {
                                        "type": "string"
                                      },
                                      "isImplicit": {
                                        "type": "boolean"
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "nextSceneId",
                                      "text",
                                      "isImplicit",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "chapterId",
                                "locationId",
                                "name",
                                "index",
                                "summary",
                                "gap",
                                "duration",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "description",
                          "climate",
                          "culture",
                          "politics",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "userId",
                    "type",
                    "title",
                    "summary",
                    "genre",
                    "language",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Story not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a story by ID",
        "description": "Updates an existing story by its unique ID.",
        "tags": [
          "Stories"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "linear",
                      "branching"
                    ]
                  },
                  "title": {
                    "type": "string",
                    "minLength": 1
                  },
                  "summary": {
                    "type": "string"
                  },
                  "genre": {
                    "type": "string"
                  },
                  "language": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Story updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "userId": {
                      "type": "string"
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "linear",
                        "branching"
                      ]
                    },
                    "title": {
                      "type": "string"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "genre": {
                      "type": "string",
                      "nullable": true
                    },
                    "language": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "characters": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "gender": {
                            "type": "string",
                            "nullable": true
                          },
                          "race": {
                            "type": "string",
                            "nullable": true
                          },
                          "subrace": {
                            "type": "string",
                            "nullable": true
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "personality": {
                            "type": "string",
                            "nullable": true
                          },
                          "motivation": {
                            "type": "string",
                            "nullable": true
                          },
                          "qualities": {
                            "type": "string",
                            "nullable": true
                          },
                          "weaknesses": {
                            "type": "string",
                            "nullable": true
                          },
                          "biography": {
                            "type": "string",
                            "nullable": true
                          },
                          "plannedTimeline": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "relations": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "charId1": {
                                  "type": "string"
                                },
                                "charId2": {
                                  "type": "string"
                                },
                                "relationType": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "relatedCharacter": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string"
                                    },
                                    "name": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "name"
                                  ]
                                }
                              },
                              "required": [
                                "id",
                                "charId1",
                                "charId2",
                                "relationType",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "gender",
                          "race",
                          "subrace",
                          "description",
                          "personality",
                          "motivation",
                          "qualities",
                          "weaknesses",
                          "biography",
                          "plannedTimeline",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "chapters": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "scenes": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "chapterId": {
                                  "type": "string"
                                },
                                "locationId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "gap": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "duration": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "moments": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      },
                                      "location": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "index": {
                                        "type": "integer"
                                      },
                                      "summary": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "isFavorite": {
                                        "type": "boolean"
                                      },
                                      "extraNotes": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "name",
                                      "location",
                                      "index",
                                      "summary",
                                      "isFavorite",
                                      "extraNotes",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                },
                                "choices": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "nextSceneId": {
                                        "type": "string"
                                      },
                                      "text": {
                                        "type": "string"
                                      },
                                      "isImplicit": {
                                        "type": "boolean"
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "nextSceneId",
                                      "text",
                                      "isImplicit",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "chapterId",
                                "locationId",
                                "name",
                                "index",
                                "summary",
                                "gap",
                                "duration",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "locations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "climate": {
                            "type": "string",
                            "nullable": true
                          },
                          "culture": {
                            "type": "string",
                            "nullable": true
                          },
                          "politics": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "scenes": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "chapterId": {
                                  "type": "string"
                                },
                                "locationId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "gap": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "duration": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "moments": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      },
                                      "location": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "index": {
                                        "type": "integer"
                                      },
                                      "summary": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "isFavorite": {
                                        "type": "boolean"
                                      },
                                      "extraNotes": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "name",
                                      "location",
                                      "index",
                                      "summary",
                                      "isFavorite",
                                      "extraNotes",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                },
                                "choices": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "nextSceneId": {
                                        "type": "string"
                                      },
                                      "text": {
                                        "type": "string"
                                      },
                                      "isImplicit": {
                                        "type": "boolean"
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "nextSceneId",
                                      "text",
                                      "isImplicit",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "chapterId",
                                "locationId",
                                "name",
                                "index",
                                "summary",
                                "gap",
                                "duration",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "description",
                          "climate",
                          "culture",
                          "politics",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "userId",
                    "type",
                    "title",
                    "summary",
                    "genre",
                    "language",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Story not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Partially update a story by ID",
        "description": "Partially updates an existing story by its unique ID. Only provided fields will be updated.",
        "tags": [
          "Stories"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "linear",
                      "branching"
                    ]
                  },
                  "title": {
                    "type": "string",
                    "minLength": 1
                  },
                  "summary": {
                    "type": "string"
                  },
                  "genre": {
                    "type": "string"
                  },
                  "language": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Story updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "userId": {
                      "type": "string"
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "linear",
                        "branching"
                      ]
                    },
                    "title": {
                      "type": "string"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "genre": {
                      "type": "string",
                      "nullable": true
                    },
                    "language": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "characters": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "gender": {
                            "type": "string",
                            "nullable": true
                          },
                          "race": {
                            "type": "string",
                            "nullable": true
                          },
                          "subrace": {
                            "type": "string",
                            "nullable": true
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "personality": {
                            "type": "string",
                            "nullable": true
                          },
                          "motivation": {
                            "type": "string",
                            "nullable": true
                          },
                          "qualities": {
                            "type": "string",
                            "nullable": true
                          },
                          "weaknesses": {
                            "type": "string",
                            "nullable": true
                          },
                          "biography": {
                            "type": "string",
                            "nullable": true
                          },
                          "plannedTimeline": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "relations": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "charId1": {
                                  "type": "string"
                                },
                                "charId2": {
                                  "type": "string"
                                },
                                "relationType": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "relatedCharacter": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string"
                                    },
                                    "name": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "name"
                                  ]
                                }
                              },
                              "required": [
                                "id",
                                "charId1",
                                "charId2",
                                "relationType",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "gender",
                          "race",
                          "subrace",
                          "description",
                          "personality",
                          "motivation",
                          "qualities",
                          "weaknesses",
                          "biography",
                          "plannedTimeline",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "chapters": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "scenes": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "chapterId": {
                                  "type": "string"
                                },
                                "locationId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "gap": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "duration": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "moments": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      },
                                      "location": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "index": {
                                        "type": "integer"
                                      },
                                      "summary": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "isFavorite": {
                                        "type": "boolean"
                                      },
                                      "extraNotes": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "name",
                                      "location",
                                      "index",
                                      "summary",
                                      "isFavorite",
                                      "extraNotes",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                },
                                "choices": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "nextSceneId": {
                                        "type": "string"
                                      },
                                      "text": {
                                        "type": "string"
                                      },
                                      "isImplicit": {
                                        "type": "boolean"
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "nextSceneId",
                                      "text",
                                      "isImplicit",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "chapterId",
                                "locationId",
                                "name",
                                "index",
                                "summary",
                                "gap",
                                "duration",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "locations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "climate": {
                            "type": "string",
                            "nullable": true
                          },
                          "culture": {
                            "type": "string",
                            "nullable": true
                          },
                          "politics": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "scenes": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "chapterId": {
                                  "type": "string"
                                },
                                "locationId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "gap": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "duration": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "moments": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      },
                                      "location": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "index": {
                                        "type": "integer"
                                      },
                                      "summary": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "isFavorite": {
                                        "type": "boolean"
                                      },
                                      "extraNotes": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "name",
                                      "location",
                                      "index",
                                      "summary",
                                      "isFavorite",
                                      "extraNotes",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                },
                                "choices": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "nextSceneId": {
                                        "type": "string"
                                      },
                                      "text": {
                                        "type": "string"
                                      },
                                      "isImplicit": {
                                        "type": "boolean"
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "nextSceneId",
                                      "text",
                                      "isImplicit",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "chapterId",
                                "locationId",
                                "name",
                                "index",
                                "summary",
                                "gap",
                                "duration",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "description",
                          "climate",
                          "culture",
                          "politics",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "userId",
                    "type",
                    "title",
                    "summary",
                    "genre",
                    "language",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Story not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a story by ID",
        "description": "Deletes a story by its unique ID.",
        "tags": [
          "Stories"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "Story deleted successfully (No Content)"
          },
          "404": {
            "description": "Story not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/characters": {
      "post": {
        "summary": "Create a new character",
        "description": "Creates a new character in a story.",
        "tags": [
          "Characters"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "storyId": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "gender": {
                    "type": "string"
                  },
                  "race": {
                    "type": "string"
                  },
                  "subrace": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "personality": {
                    "type": "string"
                  },
                  "motivation": {
                    "type": "string"
                  },
                  "qualities": {
                    "type": "string"
                  },
                  "weaknesses": {
                    "type": "string"
                  },
                  "biography": {
                    "type": "string"
                  },
                  "plannedTimeline": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                },
                "required": [
                  "storyId",
                  "name"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Character created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "gender": {
                      "type": "string",
                      "nullable": true
                    },
                    "race": {
                      "type": "string",
                      "nullable": true
                    },
                    "subrace": {
                      "type": "string",
                      "nullable": true
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "personality": {
                      "type": "string",
                      "nullable": true
                    },
                    "motivation": {
                      "type": "string",
                      "nullable": true
                    },
                    "qualities": {
                      "type": "string",
                      "nullable": true
                    },
                    "weaknesses": {
                      "type": "string",
                      "nullable": true
                    },
                    "biography": {
                      "type": "string",
                      "nullable": true
                    },
                    "plannedTimeline": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "moments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sceneId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "nullable": true
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "sceneId",
                          "name",
                          "location",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "relations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "charId1": {
                            "type": "string"
                          },
                          "charId2": {
                            "type": "string"
                          },
                          "relationType": {
                            "type": "string"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "relatedCharacter": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ]
                          }
                        },
                        "required": [
                          "id",
                          "charId1",
                          "charId2",
                          "relationType",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "gender",
                    "race",
                    "subrace",
                    "description",
                    "personality",
                    "motivation",
                    "qualities",
                    "weaknesses",
                    "biography",
                    "plannedTimeline",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/characters/batch": {
      "post": {
        "summary": "Create multiple characters",
        "description": "Creates multiple characters in a story in a single request.",
        "tags": [
          "Characters"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "storyId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string",
                      "minLength": 1
                    },
                    "gender": {
                      "type": "string"
                    },
                    "race": {
                      "type": "string"
                    },
                    "subrace": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "personality": {
                      "type": "string"
                    },
                    "motivation": {
                      "type": "string"
                    },
                    "qualities": {
                      "type": "string"
                    },
                    "weaknesses": {
                      "type": "string"
                    },
                    "biography": {
                      "type": "string"
                    },
                    "plannedTimeline": {
                      "type": "string"
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "storyId",
                    "name"
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Characters created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "storyId": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "gender": {
                        "type": "string",
                        "nullable": true
                      },
                      "race": {
                        "type": "string",
                        "nullable": true
                      },
                      "subrace": {
                        "type": "string",
                        "nullable": true
                      },
                      "description": {
                        "type": "string",
                        "nullable": true
                      },
                      "personality": {
                        "type": "string",
                        "nullable": true
                      },
                      "motivation": {
                        "type": "string",
                        "nullable": true
                      },
                      "qualities": {
                        "type": "string",
                        "nullable": true
                      },
                      "weaknesses": {
                        "type": "string",
                        "nullable": true
                      },
                      "biography": {
                        "type": "string",
                        "nullable": true
                      },
                      "plannedTimeline": {
                        "type": "string",
                        "nullable": true
                      },
                      "isFavorite": {
                        "type": "boolean"
                      },
                      "extraNotes": {
                        "type": "string",
                        "nullable": true
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "moments": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "sceneId": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "location": {
                              "type": "string",
                              "nullable": true
                            },
                            "index": {
                              "type": "integer"
                            },
                            "summary": {
                              "type": "string",
                              "nullable": true
                            },
                            "isFavorite": {
                              "type": "boolean"
                            },
                            "extraNotes": {
                              "type": "string",
                              "nullable": true
                            },
                            "createdAt": {
                              "type": "string",
                              "format": "date"
                            },
                            "updatedAt": {
                              "type": "string",
                              "format": "date"
                            }
                          },
                          "required": [
                            "id",
                            "sceneId",
                            "name",
                            "location",
                            "index",
                            "summary",
                            "isFavorite",
                            "extraNotes",
                            "createdAt",
                            "updatedAt"
                          ]
                        }
                      },
                      "relations": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "charId1": {
                              "type": "string"
                            },
                            "charId2": {
                              "type": "string"
                            },
                            "relationType": {
                              "type": "string"
                            },
                            "createdAt": {
                              "type": "string",
                              "format": "date"
                            },
                            "updatedAt": {
                              "type": "string",
                              "format": "date"
                            },
                            "relatedCharacter": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "id",
                                "name"
                              ]
                            }
                          },
                          "required": [
                            "id",
                            "charId1",
                            "charId2",
                            "relationType",
                            "createdAt",
                            "updatedAt"
                          ]
                        }
                      }
                    },
                    "required": [
                      "id",
                      "storyId",
                      "name",
                      "gender",
                      "race",
                      "subrace",
                      "description",
                      "personality",
                      "motivation",
                      "qualities",
                      "weaknesses",
                      "biography",
                      "plannedTimeline",
                      "isFavorite",
                      "extraNotes",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update multiple characters",
        "description": "Updates multiple characters in a single request.",
        "tags": [
          "Characters"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string",
                      "minLength": 1
                    },
                    "gender": {
                      "type": "string"
                    },
                    "race": {
                      "type": "string"
                    },
                    "subrace": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "personality": {
                      "type": "string"
                    },
                    "motivation": {
                      "type": "string"
                    },
                    "qualities": {
                      "type": "string"
                    },
                    "weaknesses": {
                      "type": "string"
                    },
                    "biography": {
                      "type": "string"
                    },
                    "plannedTimeline": {
                      "type": "string"
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string"
                    },
                    "id": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id"
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Characters updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "storyId": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "gender": {
                        "type": "string",
                        "nullable": true
                      },
                      "race": {
                        "type": "string",
                        "nullable": true
                      },
                      "subrace": {
                        "type": "string",
                        "nullable": true
                      },
                      "description": {
                        "type": "string",
                        "nullable": true
                      },
                      "personality": {
                        "type": "string",
                        "nullable": true
                      },
                      "motivation": {
                        "type": "string",
                        "nullable": true
                      },
                      "qualities": {
                        "type": "string",
                        "nullable": true
                      },
                      "weaknesses": {
                        "type": "string",
                        "nullable": true
                      },
                      "biography": {
                        "type": "string",
                        "nullable": true
                      },
                      "plannedTimeline": {
                        "type": "string",
                        "nullable": true
                      },
                      "isFavorite": {
                        "type": "boolean"
                      },
                      "extraNotes": {
                        "type": "string",
                        "nullable": true
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "moments": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "sceneId": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "location": {
                              "type": "string",
                              "nullable": true
                            },
                            "index": {
                              "type": "integer"
                            },
                            "summary": {
                              "type": "string",
                              "nullable": true
                            },
                            "isFavorite": {
                              "type": "boolean"
                            },
                            "extraNotes": {
                              "type": "string",
                              "nullable": true
                            },
                            "createdAt": {
                              "type": "string",
                              "format": "date"
                            },
                            "updatedAt": {
                              "type": "string",
                              "format": "date"
                            }
                          },
                          "required": [
                            "id",
                            "sceneId",
                            "name",
                            "location",
                            "index",
                            "summary",
                            "isFavorite",
                            "extraNotes",
                            "createdAt",
                            "updatedAt"
                          ]
                        }
                      },
                      "relations": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "charId1": {
                              "type": "string"
                            },
                            "charId2": {
                              "type": "string"
                            },
                            "relationType": {
                              "type": "string"
                            },
                            "createdAt": {
                              "type": "string",
                              "format": "date"
                            },
                            "updatedAt": {
                              "type": "string",
                              "format": "date"
                            },
                            "relatedCharacter": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "id",
                                "name"
                              ]
                            }
                          },
                          "required": [
                            "id",
                            "charId1",
                            "charId2",
                            "relationType",
                            "createdAt",
                            "updatedAt"
                          ]
                        }
                      }
                    },
                    "required": [
                      "id",
                      "storyId",
                      "name",
                      "gender",
                      "race",
                      "subrace",
                      "description",
                      "personality",
                      "motivation",
                      "qualities",
                      "weaknesses",
                      "biography",
                      "plannedTimeline",
                      "isFavorite",
                      "extraNotes",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Character not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/characters/{id}": {
      "get": {
        "summary": "Get a character by ID",
        "description": "Retrieves a single character by its unique ID.",
        "tags": [
          "Characters"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "include",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Character retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "gender": {
                      "type": "string",
                      "nullable": true
                    },
                    "race": {
                      "type": "string",
                      "nullable": true
                    },
                    "subrace": {
                      "type": "string",
                      "nullable": true
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "personality": {
                      "type": "string",
                      "nullable": true
                    },
                    "motivation": {
                      "type": "string",
                      "nullable": true
                    },
                    "qualities": {
                      "type": "string",
                      "nullable": true
                    },
                    "weaknesses": {
                      "type": "string",
                      "nullable": true
                    },
                    "biography": {
                      "type": "string",
                      "nullable": true
                    },
                    "plannedTimeline": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "moments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sceneId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "nullable": true
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "sceneId",
                          "name",
                          "location",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "relations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "charId1": {
                            "type": "string"
                          },
                          "charId2": {
                            "type": "string"
                          },
                          "relationType": {
                            "type": "string"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "relatedCharacter": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ]
                          }
                        },
                        "required": [
                          "id",
                          "charId1",
                          "charId2",
                          "relationType",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "gender",
                    "race",
                    "subrace",
                    "description",
                    "personality",
                    "motivation",
                    "qualities",
                    "weaknesses",
                    "biography",
                    "plannedTimeline",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Character not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a character by ID",
        "description": "Updates an existing character by its unique ID.",
        "tags": [
          "Characters"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "gender": {
                    "type": "string"
                  },
                  "race": {
                    "type": "string"
                  },
                  "subrace": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "personality": {
                    "type": "string"
                  },
                  "motivation": {
                    "type": "string"
                  },
                  "qualities": {
                    "type": "string"
                  },
                  "weaknesses": {
                    "type": "string"
                  },
                  "biography": {
                    "type": "string"
                  },
                  "plannedTimeline": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Character updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "gender": {
                      "type": "string",
                      "nullable": true
                    },
                    "race": {
                      "type": "string",
                      "nullable": true
                    },
                    "subrace": {
                      "type": "string",
                      "nullable": true
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "personality": {
                      "type": "string",
                      "nullable": true
                    },
                    "motivation": {
                      "type": "string",
                      "nullable": true
                    },
                    "qualities": {
                      "type": "string",
                      "nullable": true
                    },
                    "weaknesses": {
                      "type": "string",
                      "nullable": true
                    },
                    "biography": {
                      "type": "string",
                      "nullable": true
                    },
                    "plannedTimeline": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "moments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sceneId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "nullable": true
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "sceneId",
                          "name",
                          "location",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "relations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "charId1": {
                            "type": "string"
                          },
                          "charId2": {
                            "type": "string"
                          },
                          "relationType": {
                            "type": "string"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "relatedCharacter": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ]
                          }
                        },
                        "required": [
                          "id",
                          "charId1",
                          "charId2",
                          "relationType",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "gender",
                    "race",
                    "subrace",
                    "description",
                    "personality",
                    "motivation",
                    "qualities",
                    "weaknesses",
                    "biography",
                    "plannedTimeline",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Character not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Partially update a character by ID",
        "description": "Partially updates an existing character by its unique ID. Only provided fields will be updated.",
        "tags": [
          "Characters"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "gender": {
                    "type": "string"
                  },
                  "race": {
                    "type": "string"
                  },
                  "subrace": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "personality": {
                    "type": "string"
                  },
                  "motivation": {
                    "type": "string"
                  },
                  "qualities": {
                    "type": "string"
                  },
                  "weaknesses": {
                    "type": "string"
                  },
                  "biography": {
                    "type": "string"
                  },
                  "plannedTimeline": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Character updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "gender": {
                      "type": "string",
                      "nullable": true
                    },
                    "race": {
                      "type": "string",
                      "nullable": true
                    },
                    "subrace": {
                      "type": "string",
                      "nullable": true
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "personality": {
                      "type": "string",
                      "nullable": true
                    },
                    "motivation": {
                      "type": "string",
                      "nullable": true
                    },
                    "qualities": {
                      "type": "string",
                      "nullable": true
                    },
                    "weaknesses": {
                      "type": "string",
                      "nullable": true
                    },
                    "biography": {
                      "type": "string",
                      "nullable": true
                    },
                    "plannedTimeline": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "moments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sceneId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "nullable": true
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "sceneId",
                          "name",
                          "location",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "relations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "charId1": {
                            "type": "string"
                          },
                          "charId2": {
                            "type": "string"
                          },
                          "relationType": {
                            "type": "string"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "relatedCharacter": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ]
                          }
                        },
                        "required": [
                          "id",
                          "charId1",
                          "charId2",
                          "relationType",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "gender",
                    "race",
                    "subrace",
                    "description",
                    "personality",
                    "motivation",
                    "qualities",
                    "weaknesses",
                    "biography",
                    "plannedTimeline",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Character not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a character by ID",
        "description": "Deletes a character by its unique ID.",
        "tags": [
          "Characters"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "Character deleted successfully (No Content)"
          },
          "404": {
            "description": "Character not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/characters/story/{storyId}": {
      "get": {
        "summary": "Get characters by story ID",
        "description": "Retrieves all characters belonging to a specific story.",
        "tags": [
          "Characters"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "storyId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Characters retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "gender": {
                            "type": "string",
                            "nullable": true
                          },
                          "race": {
                            "type": "string",
                            "nullable": true
                          },
                          "subrace": {
                            "type": "string",
                            "nullable": true
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "personality": {
                            "type": "string",
                            "nullable": true
                          },
                          "motivation": {
                            "type": "string",
                            "nullable": true
                          },
                          "qualities": {
                            "type": "string",
                            "nullable": true
                          },
                          "weaknesses": {
                            "type": "string",
                            "nullable": true
                          },
                          "biography": {
                            "type": "string",
                            "nullable": true
                          },
                          "plannedTimeline": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "relations": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "charId1": {
                                  "type": "string"
                                },
                                "charId2": {
                                  "type": "string"
                                },
                                "relationType": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "relatedCharacter": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string"
                                    },
                                    "name": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "name"
                                  ]
                                }
                              },
                              "required": [
                                "id",
                                "charId1",
                                "charId2",
                                "relationType",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "gender",
                          "race",
                          "subrace",
                          "description",
                          "personality",
                          "motivation",
                          "qualities",
                          "weaknesses",
                          "biography",
                          "plannedTimeline",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Story not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/characters/bulk-delete": {
      "post": {
        "summary": "Bulk delete characters",
        "description": "Deletes multiple characters by their IDs.",
        "tags": [
          "Characters"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "ulid"
                    }
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete operation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "successfulIds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "failedIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "reason"
                        ]
                      }
                    }
                  },
                  "required": [
                    "successfulIds",
                    "failedIds"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/chapters": {
      "post": {
        "summary": "Create a new chapter",
        "description": "Creates a new chapter in a story.",
        "tags": [
          "Chapters"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "storyId": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "index": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "summary": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                },
                "required": [
                  "storyId",
                  "name",
                  "index"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Chapter created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "index": {
                      "type": "integer"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "scenes": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "chapterId": {
                            "type": "string"
                          },
                          "locationId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "gap": {
                            "type": "string",
                            "nullable": true
                          },
                          "duration": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "choices": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "nextSceneId": {
                                  "type": "string"
                                },
                                "text": {
                                  "type": "string"
                                },
                                "isImplicit": {
                                  "type": "boolean"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "nextSceneId",
                                "text",
                                "isImplicit",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "chapterId",
                          "locationId",
                          "name",
                          "index",
                          "summary",
                          "gap",
                          "duration",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "index",
                    "summary",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/chapters/{id}": {
      "get": {
        "summary": "Get a chapter by ID",
        "description": "Retrieves a single chapter by its unique ID.",
        "tags": [
          "Chapters"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "include",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Chapter retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "index": {
                      "type": "integer"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "scenes": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "chapterId": {
                            "type": "string"
                          },
                          "locationId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "gap": {
                            "type": "string",
                            "nullable": true
                          },
                          "duration": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "choices": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "nextSceneId": {
                                  "type": "string"
                                },
                                "text": {
                                  "type": "string"
                                },
                                "isImplicit": {
                                  "type": "boolean"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "nextSceneId",
                                "text",
                                "isImplicit",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "chapterId",
                          "locationId",
                          "name",
                          "index",
                          "summary",
                          "gap",
                          "duration",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "index",
                    "summary",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Chapter not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a chapter by ID",
        "description": "Updates an existing chapter by its unique ID.",
        "tags": [
          "Chapters"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "index": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "summary": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Chapter updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "index": {
                      "type": "integer"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "scenes": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "chapterId": {
                            "type": "string"
                          },
                          "locationId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "gap": {
                            "type": "string",
                            "nullable": true
                          },
                          "duration": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "choices": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "nextSceneId": {
                                  "type": "string"
                                },
                                "text": {
                                  "type": "string"
                                },
                                "isImplicit": {
                                  "type": "boolean"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "nextSceneId",
                                "text",
                                "isImplicit",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "chapterId",
                          "locationId",
                          "name",
                          "index",
                          "summary",
                          "gap",
                          "duration",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "index",
                    "summary",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Chapter not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Partially update a chapter by ID",
        "description": "Partially updates an existing chapter by its unique ID. Only provided fields will be updated.",
        "tags": [
          "Chapters"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "index": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "summary": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Chapter updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "index": {
                      "type": "integer"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "scenes": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "chapterId": {
                            "type": "string"
                          },
                          "locationId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "gap": {
                            "type": "string",
                            "nullable": true
                          },
                          "duration": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "choices": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "nextSceneId": {
                                  "type": "string"
                                },
                                "text": {
                                  "type": "string"
                                },
                                "isImplicit": {
                                  "type": "boolean"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "nextSceneId",
                                "text",
                                "isImplicit",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "chapterId",
                          "locationId",
                          "name",
                          "index",
                          "summary",
                          "gap",
                          "duration",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "index",
                    "summary",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Chapter not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a chapter by ID",
        "description": "Deletes a chapter by its unique ID.",
        "tags": [
          "Chapters"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "Chapter deleted successfully (No Content)"
          },
          "404": {
            "description": "Chapter not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/chapters/story/{storyId}": {
      "get": {
        "summary": "Get chapters by story ID",
        "description": "Retrieves all chapters belonging to a specific story.",
        "tags": [
          "Chapters"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "storyId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Chapters retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "scenes": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "chapterId": {
                                  "type": "string"
                                },
                                "locationId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "gap": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "duration": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "moments": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      },
                                      "location": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "index": {
                                        "type": "integer"
                                      },
                                      "summary": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "isFavorite": {
                                        "type": "boolean"
                                      },
                                      "extraNotes": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "name",
                                      "location",
                                      "index",
                                      "summary",
                                      "isFavorite",
                                      "extraNotes",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                },
                                "choices": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "nextSceneId": {
                                        "type": "string"
                                      },
                                      "text": {
                                        "type": "string"
                                      },
                                      "isImplicit": {
                                        "type": "boolean"
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "nextSceneId",
                                      "text",
                                      "isImplicit",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "chapterId",
                                "locationId",
                                "name",
                                "index",
                                "summary",
                                "gap",
                                "duration",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Story not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/chapters/bulk-delete": {
      "post": {
        "summary": "Bulk delete chapters",
        "description": "Deletes multiple chapters by their IDs.",
        "tags": [
          "Chapters"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "ulid"
                    }
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete operation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "successfulIds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "failedIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "reason"
                        ]
                      }
                    }
                  },
                  "required": [
                    "successfulIds",
                    "failedIds"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/scenes/location/{locationId}": {
      "get": {
        "summary": "Get scenes by location ID",
        "description": "Retrieves all scenes belonging to a specific location.",
        "tags": [
          "Scenes"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "locationId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Scenes retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "chapterId": {
                            "type": "string"
                          },
                          "locationId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "gap": {
                            "type": "string",
                            "nullable": true
                          },
                          "duration": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "choices": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "nextSceneId": {
                                  "type": "string"
                                },
                                "text": {
                                  "type": "string"
                                },
                                "isImplicit": {
                                  "type": "boolean"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "nextSceneId",
                                "text",
                                "isImplicit",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "chapterId",
                          "locationId",
                          "name",
                          "index",
                          "summary",
                          "gap",
                          "duration",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Location not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/scenes/chapter/{chapterId}": {
      "get": {
        "summary": "Get scenes by chapter ID",
        "description": "Retrieves all scenes belonging to a specific chapter.",
        "tags": [
          "Scenes"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "chapterId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Scenes retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "chapterId": {
                            "type": "string"
                          },
                          "locationId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "gap": {
                            "type": "string",
                            "nullable": true
                          },
                          "duration": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "choices": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "nextSceneId": {
                                  "type": "string"
                                },
                                "text": {
                                  "type": "string"
                                },
                                "isImplicit": {
                                  "type": "boolean"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "nextSceneId",
                                "text",
                                "isImplicit",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "chapterId",
                          "locationId",
                          "name",
                          "index",
                          "summary",
                          "gap",
                          "duration",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Chapter not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/scenes": {
      "post": {
        "summary": "Create a new scene",
        "description": "Creates a new scene within a chapter.",
        "tags": [
          "Scenes"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "chapterId": {
                    "type": "string"
                  },
                  "locationId": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "index": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "summary": {
                    "type": "string"
                  },
                  "gap": {
                    "type": "string"
                  },
                  "duration": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                },
                "required": [
                  "chapterId",
                  "locationId",
                  "name",
                  "index"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Scene created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "chapterId": {
                      "type": "string"
                    },
                    "locationId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "index": {
                      "type": "integer"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "gap": {
                      "type": "string",
                      "nullable": true
                    },
                    "duration": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "moments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sceneId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "nullable": true
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "sceneId",
                          "name",
                          "location",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "choices": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sceneId": {
                            "type": "string"
                          },
                          "nextSceneId": {
                            "type": "string"
                          },
                          "text": {
                            "type": "string"
                          },
                          "isImplicit": {
                            "type": "boolean"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "sceneId",
                          "nextSceneId",
                          "text",
                          "isImplicit",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "chapterId",
                    "locationId",
                    "name",
                    "index",
                    "summary",
                    "gap",
                    "duration",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/scenes/{id}": {
      "get": {
        "summary": "Get a scene by ID",
        "description": "Retrieves a single scene by its unique ID.",
        "tags": [
          "Scenes"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "include",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Scene retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "chapterId": {
                      "type": "string"
                    },
                    "locationId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "index": {
                      "type": "integer"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "gap": {
                      "type": "string",
                      "nullable": true
                    },
                    "duration": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "moments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sceneId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "nullable": true
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "sceneId",
                          "name",
                          "location",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "choices": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sceneId": {
                            "type": "string"
                          },
                          "nextSceneId": {
                            "type": "string"
                          },
                          "text": {
                            "type": "string"
                          },
                          "isImplicit": {
                            "type": "boolean"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "sceneId",
                          "nextSceneId",
                          "text",
                          "isImplicit",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "chapterId",
                    "locationId",
                    "name",
                    "index",
                    "summary",
                    "gap",
                    "duration",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Scene not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a scene by ID",
        "description": "Updates an existing scene by its unique ID.",
        "tags": [
          "Scenes"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "chapterId": {
                    "type": "string"
                  },
                  "locationId": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "index": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "summary": {
                    "type": "string"
                  },
                  "gap": {
                    "type": "string"
                  },
                  "duration": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Scene updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "chapterId": {
                      "type": "string"
                    },
                    "locationId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "index": {
                      "type": "integer"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "gap": {
                      "type": "string",
                      "nullable": true
                    },
                    "duration": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "moments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sceneId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "nullable": true
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "sceneId",
                          "name",
                          "location",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "choices": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sceneId": {
                            "type": "string"
                          },
                          "nextSceneId": {
                            "type": "string"
                          },
                          "text": {
                            "type": "string"
                          },
                          "isImplicit": {
                            "type": "boolean"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "sceneId",
                          "nextSceneId",
                          "text",
                          "isImplicit",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "chapterId",
                    "locationId",
                    "name",
                    "index",
                    "summary",
                    "gap",
                    "duration",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Scene not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Partially update a scene by ID",
        "description": "Partially updates an existing scene by its unique ID. Only provided fields will be updated.",
        "tags": [
          "Scenes"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "chapterId": {
                    "type": "string"
                  },
                  "locationId": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "index": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "summary": {
                    "type": "string"
                  },
                  "gap": {
                    "type": "string"
                  },
                  "duration": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Scene updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "chapterId": {
                      "type": "string"
                    },
                    "locationId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "index": {
                      "type": "integer"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "gap": {
                      "type": "string",
                      "nullable": true
                    },
                    "duration": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "moments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sceneId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "nullable": true
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "sceneId",
                          "name",
                          "location",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "choices": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sceneId": {
                            "type": "string"
                          },
                          "nextSceneId": {
                            "type": "string"
                          },
                          "text": {
                            "type": "string"
                          },
                          "isImplicit": {
                            "type": "boolean"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "sceneId",
                          "nextSceneId",
                          "text",
                          "isImplicit",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "chapterId",
                    "locationId",
                    "name",
                    "index",
                    "summary",
                    "gap",
                    "duration",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Scene not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a scene by ID",
        "description": "Deletes a scene by its unique ID.",
        "tags": [
          "Scenes"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "Scene deleted successfully (No Content)"
          },
          "404": {
            "description": "Scene not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/scenes/bulk-delete": {
      "post": {
        "summary": "Bulk delete scenes",
        "description": "Deletes multiple scenes by their IDs.",
        "tags": [
          "Scenes"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "ulid"
                    }
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete operation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "successfulIds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "failedIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "reason"
                        ]
                      }
                    }
                  },
                  "required": [
                    "successfulIds",
                    "failedIds"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/moments": {
      "post": {
        "summary": "Create a new moment",
        "description": "Creates a new moment for a scene.",
        "tags": [
          "Moments"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "sceneId": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "location": {
                    "type": "string"
                  },
                  "index": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "summary": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                },
                "required": [
                  "sceneId",
                  "name",
                  "index"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Moment created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "sceneId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "location": {
                      "type": "string",
                      "nullable": true
                    },
                    "index": {
                      "type": "integer"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "sceneId",
                    "name",
                    "location",
                    "index",
                    "summary",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/moments/batch": {
      "post": {
        "summary": "Create multiple moments",
        "description": "Creates multiple moments for a scene in a single request.",
        "tags": [
          "Moments"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "sceneId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string",
                      "minLength": 1
                    },
                    "location": {
                      "type": "string"
                    },
                    "index": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "summary": {
                      "type": "string"
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "sceneId",
                    "name",
                    "index"
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Moments created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "sceneId": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "location": {
                        "type": "string",
                        "nullable": true
                      },
                      "index": {
                        "type": "integer"
                      },
                      "summary": {
                        "type": "string",
                        "nullable": true
                      },
                      "isFavorite": {
                        "type": "boolean"
                      },
                      "extraNotes": {
                        "type": "string",
                        "nullable": true
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      }
                    },
                    "required": [
                      "id",
                      "sceneId",
                      "name",
                      "location",
                      "index",
                      "summary",
                      "isFavorite",
                      "extraNotes",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update multiple moments",
        "description": "Updates multiple moments in a single request.",
        "tags": [
          "Moments"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "sceneId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string",
                      "minLength": 1
                    },
                    "location": {
                      "type": "string"
                    },
                    "index": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "summary": {
                      "type": "string"
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string"
                    },
                    "id": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id"
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Moments updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "sceneId": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "location": {
                        "type": "string",
                        "nullable": true
                      },
                      "index": {
                        "type": "integer"
                      },
                      "summary": {
                        "type": "string",
                        "nullable": true
                      },
                      "isFavorite": {
                        "type": "boolean"
                      },
                      "extraNotes": {
                        "type": "string",
                        "nullable": true
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      }
                    },
                    "required": [
                      "id",
                      "sceneId",
                      "name",
                      "location",
                      "index",
                      "summary",
                      "isFavorite",
                      "extraNotes",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Moment not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/moments/{id}": {
      "get": {
        "summary": "Get a moment by ID",
        "description": "Retrieves a single moment by its unique ID.",
        "tags": [
          "Moments"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Moment retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "sceneId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "location": {
                      "type": "string",
                      "nullable": true
                    },
                    "index": {
                      "type": "integer"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "sceneId",
                    "name",
                    "location",
                    "index",
                    "summary",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Moment not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a moment by ID",
        "description": "Updates an existing moment by its unique ID.",
        "tags": [
          "Moments"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "sceneId": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "location": {
                    "type": "string"
                  },
                  "index": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "summary": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Moment updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "sceneId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "location": {
                      "type": "string",
                      "nullable": true
                    },
                    "index": {
                      "type": "integer"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "sceneId",
                    "name",
                    "location",
                    "index",
                    "summary",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Moment not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Partially update a moment by ID",
        "description": "Partially updates an existing moment by its unique ID. Only provided fields will be updated.",
        "tags": [
          "Moments"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "sceneId": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "location": {
                    "type": "string"
                  },
                  "index": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "summary": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Moment updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "sceneId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "location": {
                      "type": "string",
                      "nullable": true
                    },
                    "index": {
                      "type": "integer"
                    },
                    "summary": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "sceneId",
                    "name",
                    "location",
                    "index",
                    "summary",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Moment not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a moment by ID",
        "description": "Deletes a moment by its unique ID.",
        "tags": [
          "Moments"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "Moment deleted successfully"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Moment not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/moments/bulk-delete": {
      "post": {
        "summary": "Bulk delete moments",
        "description": "Deletes multiple moments by their IDs.",
        "tags": [
          "Moments"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "ulid"
                    }
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete operation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "successfulIds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "failedIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "reason"
                        ]
                      }
                    }
                  },
                  "required": [
                    "successfulIds",
                    "failedIds"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/moments/by-scene/{sceneId}": {
      "get": {
        "summary": "Get moments by scene ID",
        "description": "Retrieves all moments associated with a specific scene.",
        "tags": [
          "Moments"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "sceneId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Moments retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sceneId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "nullable": true
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "sceneId",
                          "name",
                          "location",
                          "index",
                          "summary",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/locations": {
      "post": {
        "summary": "Create a new location",
        "description": "Creates a new location in a story.",
        "tags": [
          "Locations"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "storyId": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "description": {
                    "type": "string"
                  },
                  "climate": {
                    "type": "string"
                  },
                  "culture": {
                    "type": "string"
                  },
                  "politics": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                },
                "required": [
                  "storyId",
                  "name"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Location created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "climate": {
                      "type": "string",
                      "nullable": true
                    },
                    "culture": {
                      "type": "string",
                      "nullable": true
                    },
                    "politics": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "scenes": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "chapterId": {
                            "type": "string"
                          },
                          "locationId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "gap": {
                            "type": "string",
                            "nullable": true
                          },
                          "duration": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "choices": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "nextSceneId": {
                                  "type": "string"
                                },
                                "text": {
                                  "type": "string"
                                },
                                "isImplicit": {
                                  "type": "boolean"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "nextSceneId",
                                "text",
                                "isImplicit",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "chapterId",
                          "locationId",
                          "name",
                          "index",
                          "summary",
                          "gap",
                          "duration",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "description",
                    "climate",
                    "culture",
                    "politics",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/locations/{id}": {
      "get": {
        "summary": "Get a location by ID",
        "description": "Retrieves a single location by its unique ID.",
        "tags": [
          "Locations"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "include",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Location retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "climate": {
                      "type": "string",
                      "nullable": true
                    },
                    "culture": {
                      "type": "string",
                      "nullable": true
                    },
                    "politics": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "scenes": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "chapterId": {
                            "type": "string"
                          },
                          "locationId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "gap": {
                            "type": "string",
                            "nullable": true
                          },
                          "duration": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "choices": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "nextSceneId": {
                                  "type": "string"
                                },
                                "text": {
                                  "type": "string"
                                },
                                "isImplicit": {
                                  "type": "boolean"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "nextSceneId",
                                "text",
                                "isImplicit",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "chapterId",
                          "locationId",
                          "name",
                          "index",
                          "summary",
                          "gap",
                          "duration",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "description",
                    "climate",
                    "culture",
                    "politics",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Location not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a location by ID",
        "description": "Updates an existing location by its unique ID.",
        "tags": [
          "Locations"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "description": {
                    "type": "string"
                  },
                  "climate": {
                    "type": "string"
                  },
                  "culture": {
                    "type": "string"
                  },
                  "politics": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Location updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "climate": {
                      "type": "string",
                      "nullable": true
                    },
                    "culture": {
                      "type": "string",
                      "nullable": true
                    },
                    "politics": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "scenes": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "chapterId": {
                            "type": "string"
                          },
                          "locationId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "gap": {
                            "type": "string",
                            "nullable": true
                          },
                          "duration": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "choices": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "nextSceneId": {
                                  "type": "string"
                                },
                                "text": {
                                  "type": "string"
                                },
                                "isImplicit": {
                                  "type": "boolean"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "nextSceneId",
                                "text",
                                "isImplicit",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "chapterId",
                          "locationId",
                          "name",
                          "index",
                          "summary",
                          "gap",
                          "duration",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "description",
                    "climate",
                    "culture",
                    "politics",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Location not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Partially update a location by ID",
        "description": "Partially updates an existing location by its unique ID. Only provided fields will be updated.",
        "tags": [
          "Locations"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "description": {
                    "type": "string"
                  },
                  "climate": {
                    "type": "string"
                  },
                  "culture": {
                    "type": "string"
                  },
                  "politics": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Location updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "climate": {
                      "type": "string",
                      "nullable": true
                    },
                    "culture": {
                      "type": "string",
                      "nullable": true
                    },
                    "politics": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "scenes": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "chapterId": {
                            "type": "string"
                          },
                          "locationId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "index": {
                            "type": "integer"
                          },
                          "summary": {
                            "type": "string",
                            "nullable": true
                          },
                          "gap": {
                            "type": "string",
                            "nullable": true
                          },
                          "duration": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "moments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "location": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "name",
                                "location",
                                "index",
                                "summary",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "choices": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sceneId": {
                                  "type": "string"
                                },
                                "nextSceneId": {
                                  "type": "string"
                                },
                                "text": {
                                  "type": "string"
                                },
                                "isImplicit": {
                                  "type": "boolean"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                }
                              },
                              "required": [
                                "id",
                                "sceneId",
                                "nextSceneId",
                                "text",
                                "isImplicit",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "chapterId",
                          "locationId",
                          "name",
                          "index",
                          "summary",
                          "gap",
                          "duration",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "description",
                    "climate",
                    "culture",
                    "politics",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Location not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a location by ID",
        "description": "Deletes a location by its unique ID.",
        "tags": [
          "Locations"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "Location deleted successfully (No Content)"
          },
          "404": {
            "description": "Location not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/locations/story/{storyId}": {
      "get": {
        "summary": "Get locations by story ID",
        "description": "Retrieves all locations belonging to a specific story.",
        "tags": [
          "Locations"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "storyId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Locations retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "climate": {
                            "type": "string",
                            "nullable": true
                          },
                          "culture": {
                            "type": "string",
                            "nullable": true
                          },
                          "politics": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "scenes": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "chapterId": {
                                  "type": "string"
                                },
                                "locationId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "index": {
                                  "type": "integer"
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "gap": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "duration": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "isFavorite": {
                                  "type": "boolean"
                                },
                                "extraNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date"
                                },
                                "moments": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      },
                                      "location": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "index": {
                                        "type": "integer"
                                      },
                                      "summary": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "isFavorite": {
                                        "type": "boolean"
                                      },
                                      "extraNotes": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "name",
                                      "location",
                                      "index",
                                      "summary",
                                      "isFavorite",
                                      "extraNotes",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                },
                                "choices": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "sceneId": {
                                        "type": "string"
                                      },
                                      "nextSceneId": {
                                        "type": "string"
                                      },
                                      "text": {
                                        "type": "string"
                                      },
                                      "isImplicit": {
                                        "type": "boolean"
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "sceneId",
                                      "nextSceneId",
                                      "text",
                                      "isImplicit",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "chapterId",
                                "locationId",
                                "name",
                                "index",
                                "summary",
                                "gap",
                                "duration",
                                "isFavorite",
                                "extraNotes",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "description",
                          "climate",
                          "culture",
                          "politics",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Story not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/locations/bulk-delete": {
      "post": {
        "summary": "Bulk delete locations",
        "description": "Deletes multiple locations by their IDs.",
        "tags": [
          "Locations"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "ulid"
                    }
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete operation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "successfulIds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "failedIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "reason"
                        ]
                      }
                    }
                  },
                  "required": [
                    "successfulIds",
                    "failedIds"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/gallery": {
      "post": {
        "summary": "Create a new gallery item",
        "description": "Creates a new gallery item for a story or owner.",
        "tags": [
          "Gallery"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "storyId": {
                    "type": "string"
                  },
                  "ownerId": {
                    "type": "string"
                  },
                  "ownerType": {
                    "anyOf": [
                      {
                        "type": "string",
                        "enum": [
                          "character"
                        ]
                      },
                      {
                        "type": "string",
                        "enum": [
                          "note"
                        ]
                      },
                      {
                        "type": "string",
                        "enum": [
                          "location"
                        ]
                      }
                    ]
                  },
                  "imagePath": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  },
                  "file": {
                    "type": "string"
                  }
                },
                "required": [
                  "storyId",
                  "ownerId",
                  "ownerType",
                  "imagePath",
                  "file"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Gallery item created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "ownerId": {
                      "type": "string"
                    },
                    "ownerType": {
                      "anyOf": [
                        {
                          "type": "string",
                          "enum": [
                            "character"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "note"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "location"
                          ]
                        }
                      ]
                    },
                    "imagePath": {
                      "type": "string"
                    },
                    "isFile": {
                      "type": "boolean"
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "ownerId",
                    "ownerType",
                    "imagePath",
                    "isFile",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/gallery/{id}": {
      "get": {
        "summary": "Get a gallery item by ID",
        "description": "Retrieves a single gallery item by its unique ID.",
        "tags": [
          "Gallery"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Gallery item retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "ownerId": {
                      "type": "string"
                    },
                    "ownerType": {
                      "anyOf": [
                        {
                          "type": "string",
                          "enum": [
                            "character"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "note"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "location"
                          ]
                        }
                      ]
                    },
                    "imagePath": {
                      "type": "string"
                    },
                    "isFile": {
                      "type": "boolean"
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "ownerId",
                    "ownerType",
                    "imagePath",
                    "isFile",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Gallery item not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a gallery item by ID",
        "description": "Updates an existing gallery item by its unique ID.",
        "tags": [
          "Gallery"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "ownerId": {
                    "type": "string"
                  },
                  "ownerType": {
                    "anyOf": [
                      {
                        "type": "string",
                        "enum": [
                          "character"
                        ]
                      },
                      {
                        "type": "string",
                        "enum": [
                          "note"
                        ]
                      },
                      {
                        "type": "string",
                        "enum": [
                          "location"
                        ]
                      }
                    ]
                  },
                  "imagePath": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  },
                  "file": {
                    "type": "string"
                  }
                },
                "required": [
                  "id"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Gallery item updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "ownerId": {
                      "type": "string"
                    },
                    "ownerType": {
                      "anyOf": [
                        {
                          "type": "string",
                          "enum": [
                            "character"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "note"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "location"
                          ]
                        }
                      ]
                    },
                    "imagePath": {
                      "type": "string"
                    },
                    "isFile": {
                      "type": "boolean"
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "ownerId",
                    "ownerType",
                    "imagePath",
                    "isFile",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Gallery item not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Partially update a gallery item by ID",
        "description": "Partially updates an existing gallery item by its unique ID. Only provided fields will be updated.",
        "tags": [
          "Gallery"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "ownerId": {
                    "type": "string"
                  },
                  "ownerType": {
                    "anyOf": [
                      {
                        "type": "string",
                        "enum": [
                          "character"
                        ]
                      },
                      {
                        "type": "string",
                        "enum": [
                          "note"
                        ]
                      },
                      {
                        "type": "string",
                        "enum": [
                          "location"
                        ]
                      }
                    ]
                  },
                  "imagePath": {
                    "type": "string"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string"
                  },
                  "file": {
                    "type": "string"
                  }
                },
                "required": [
                  "id"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Gallery item updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "storyId": {
                      "type": "string"
                    },
                    "ownerId": {
                      "type": "string"
                    },
                    "ownerType": {
                      "anyOf": [
                        {
                          "type": "string",
                          "enum": [
                            "character"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "note"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "location"
                          ]
                        }
                      ]
                    },
                    "imagePath": {
                      "type": "string"
                    },
                    "isFile": {
                      "type": "boolean"
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "ownerId",
                    "ownerType",
                    "imagePath",
                    "isFile",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Gallery item not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a gallery item by ID",
        "description": "Deletes a gallery item by its unique ID.",
        "tags": [
          "Gallery"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "storyId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "ownerId",
            "in": "query"
          }
        ],
        "responses": {
          "204": {
            "description": "Gallery item deleted successfully (No Content)"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Gallery item not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/gallery/images/{id}": {
      "get": {
        "summary": "Serve a gallery image file",
        "description": "Retrieves a gallery image file by its ID.",
        "tags": [
          "Gallery"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Image file retrieved successfully",
            "content": {
              "application/octet-stream": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "404": {
            "description": "Image not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/gallery/owner/{ownerId}": {
      "get": {
        "summary": "Get gallery items by owner ID",
        "description": "Retrieves all gallery items belonging to a specific owner.",
        "tags": [
          "Gallery"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "ownerId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Gallery items retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "ownerId": {
                            "type": "string"
                          },
                          "ownerType": {
                            "anyOf": [
                              {
                                "type": "string",
                                "enum": [
                                  "character"
                                ]
                              },
                              {
                                "type": "string",
                                "enum": [
                                  "note"
                                ]
                              },
                              {
                                "type": "string",
                                "enum": [
                                  "location"
                                ]
                              }
                            ]
                          },
                          "imagePath": {
                            "type": "string"
                          },
                          "isFile": {
                            "type": "boolean"
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "ownerId",
                          "ownerType",
                          "imagePath",
                          "isFile",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Owner not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/gallery/story/{storyId}": {
      "get": {
        "summary": "Get gallery items by story ID",
        "description": "Retrieves all gallery items belonging to a specific story.",
        "tags": [
          "Gallery"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "storyId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Gallery items retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "storyId": {
                            "type": "string"
                          },
                          "ownerId": {
                            "type": "string"
                          },
                          "ownerType": {
                            "anyOf": [
                              {
                                "type": "string",
                                "enum": [
                                  "character"
                                ]
                              },
                              {
                                "type": "string",
                                "enum": [
                                  "note"
                                ]
                              },
                              {
                                "type": "string",
                                "enum": [
                                  "location"
                                ]
                              }
                            ]
                          },
                          "imagePath": {
                            "type": "string"
                          },
                          "isFile": {
                            "type": "boolean"
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "ownerId",
                          "ownerType",
                          "imagePath",
                          "isFile",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Story not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/gallery/bulk-delete": {
      "post": {
        "summary": "Bulk delete gallery items",
        "description": "Deletes multiple gallery items by their IDs.",
        "tags": [
          "Gallery"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "ulid"
                    }
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete operation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "successfulIds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "failedIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "reason"
                        ]
                      }
                    }
                  },
                  "required": [
                    "successfulIds",
                    "failedIds"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/character-moments": {
      "post": {
        "summary": "Create a new character moment",
        "description": "Creates a new association between a character and a moment.",
        "tags": [
          "Character Moments"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "characterId": {
                    "type": "string"
                  },
                  "momentId": {
                    "type": "string"
                  }
                },
                "required": [
                  "characterId",
                  "momentId"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Character Moment created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "characterId": {
                      "type": "string"
                    },
                    "momentId": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "characterId",
                    "momentId",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/character-moments/batch": {
      "post": {
        "summary": "Create multiple character moments",
        "description": "Creates multiple associations between characters and moments in a single request.",
        "tags": [
          "Character Moments"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "characterId": {
                      "type": "string"
                    },
                    "momentId": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "characterId",
                    "momentId"
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Character Moments created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "characterId": {
                        "type": "string"
                      },
                      "momentId": {
                        "type": "string"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      }
                    },
                    "required": [
                      "characterId",
                      "momentId",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update multiple character moments",
        "description": "Updates multiple associations between characters and moments in a single request.",
        "tags": [
          "Character Moments"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "characterId": {
                      "type": "string"
                    },
                    "momentId": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "characterId",
                    "momentId"
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Character Moments updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "characterId": {
                        "type": "string"
                      },
                      "momentId": {
                        "type": "string"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      }
                    },
                    "required": [
                      "characterId",
                      "momentId",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Character Moment not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/character-moments/character/{characterId}": {
      "get": {
        "summary": "Get character moments by character ID",
        "description": "Retrieves all moments associated with a specific character.",
        "tags": [
          "Character Moments"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "characterId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Character Moments retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "characterId": {
                        "type": "string"
                      },
                      "momentId": {
                        "type": "string"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      }
                    },
                    "required": [
                      "characterId",
                      "momentId",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "404": {
            "description": "Character not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/character-moments/moment/{momentId}": {
      "get": {
        "summary": "Get character moments by moment ID",
        "description": "Retrieves all characters associated with a specific moment.",
        "tags": [
          "Character Moments"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "momentId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Character Moments retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "characterId": {
                        "type": "string"
                      },
                      "momentId": {
                        "type": "string"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      }
                    },
                    "required": [
                      "characterId",
                      "momentId",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "404": {
            "description": "Moment not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/character-moments/{characterId}/{momentId}": {
      "delete": {
        "summary": "Delete a character moment",
        "description": "Deletes an association between a character and a moment.",
        "tags": [
          "Character Moments"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "momentId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "characterId",
            "in": "query"
          }
        ],
        "responses": {
          "204": {
            "description": "Character Moment deleted successfully (No Content)"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Character Moment not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/character-moments/bulk-delete": {
      "post": {
        "summary": "Bulk delete character moments",
        "description": "Deletes multiple character moments by their IDs.",
        "tags": [
          "Character Moments"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "characterId": {
                          "type": "string"
                        },
                        "momentId": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "characterId",
                        "momentId"
                      ]
                    }
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete operation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "successfulIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "characterId": {
                            "type": "string"
                          },
                          "momentId": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "characterId",
                          "momentId"
                        ]
                      }
                    },
                    "failedIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "characterId": {
                            "type": "string"
                          },
                          "momentId": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "characterId",
                          "momentId",
                          "reason"
                        ]
                      }
                    }
                  },
                  "required": [
                    "successfulIds",
                    "failedIds"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/character-relations": {
      "post": {
        "summary": "Create a new character relation",
        "description": "Creates a new relation between two characters.",
        "tags": [
          "Character Relations"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "charId1": {
                    "type": "string"
                  },
                  "charId2": {
                    "type": "string"
                  },
                  "relationType": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "charId1",
                  "charId2",
                  "relationType"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Character Relation created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "charId1": {
                      "type": "string"
                    },
                    "charId2": {
                      "type": "string"
                    },
                    "relationType": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "relatedCharacter": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "name"
                      ]
                    }
                  },
                  "required": [
                    "id",
                    "charId1",
                    "charId2",
                    "relationType",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/character-relations/batch": {
      "post": {
        "summary": "Create multiple character relations",
        "description": "Creates multiple relations between characters in a single request.",
        "tags": [
          "Character Relations"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "charId1": {
                      "type": "string"
                    },
                    "charId2": {
                      "type": "string"
                    },
                    "relationType": {
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": [
                    "charId1",
                    "charId2",
                    "relationType"
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Character Relations created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "charId1": {
                        "type": "string"
                      },
                      "charId2": {
                        "type": "string"
                      },
                      "relationType": {
                        "type": "string"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "relatedCharacter": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "name"
                        ]
                      }
                    },
                    "required": [
                      "id",
                      "charId1",
                      "charId2",
                      "relationType",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update multiple character relations",
        "description": "Updates multiple relations between characters in a single request.",
        "tags": [
          "Character Relations"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "relationType": {
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": [
                    "id"
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Character Relations updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "charId1": {
                        "type": "string"
                      },
                      "charId2": {
                        "type": "string"
                      },
                      "relationType": {
                        "type": "string"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "relatedCharacter": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "name"
                        ]
                      }
                    },
                    "required": [
                      "id",
                      "charId1",
                      "charId2",
                      "relationType",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Character Relation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/character-relations/{id}": {
      "get": {
        "summary": "Get a character relation by ID",
        "description": "Retrieves a single character relation by its unique ID.",
        "tags": [
          "Character Relations"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Character Relation retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "charId1": {
                      "type": "string"
                    },
                    "charId2": {
                      "type": "string"
                    },
                    "relationType": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "relatedCharacter": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "name"
                      ]
                    }
                  },
                  "required": [
                    "id",
                    "charId1",
                    "charId2",
                    "relationType",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Character Relation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a character relation by ID",
        "description": "Updates an existing character relation by its unique ID.",
        "tags": [
          "Character Relations"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "relationType": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "id"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Character Relation updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "charId1": {
                      "type": "string"
                    },
                    "charId2": {
                      "type": "string"
                    },
                    "relationType": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "relatedCharacter": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "name"
                      ]
                    }
                  },
                  "required": [
                    "id",
                    "charId1",
                    "charId2",
                    "relationType",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Character Relation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a character relation by ID",
        "description": "Deletes a character relation by its unique ID.",
        "tags": [
          "Character Relations"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "Character Relation deleted successfully (No Content)"
          },
          "404": {
            "description": "Character Relation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/character-relations/character/{charId}": {
      "get": {
        "summary": "Get character relations by character ID",
        "description": "Retrieves all relations associated with a specific character.",
        "tags": [
          "Character Relations"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "charId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Character Relations retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "charId1": {
                        "type": "string"
                      },
                      "charId2": {
                        "type": "string"
                      },
                      "relationType": {
                        "type": "string"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "relatedCharacter": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "name"
                        ]
                      }
                    },
                    "required": [
                      "id",
                      "charId1",
                      "charId2",
                      "relationType",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "404": {
            "description": "Character not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/character-relations/bulk-delete": {
      "post": {
        "summary": "Bulk delete character relations",
        "description": "Deletes multiple character relations by their IDs.",
        "tags": [
          "Character Relations"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "ulid"
                    }
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete operation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "successfulIds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "failedIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "reason"
                        ]
                      }
                    }
                  },
                  "required": [
                    "successfulIds",
                    "failedIds"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/choices": {
      "post": {
        "summary": "Create a new choice",
        "description": "Creates a new choice for a scene.",
        "tags": [
          "Choices"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "sceneId": {
                    "type": "string"
                  },
                  "nextSceneId": {
                    "type": "string"
                  },
                  "text": {
                    "type": "string",
                    "minLength": 1
                  },
                  "isImplicit": {
                    "type": "boolean",
                    "default": false
                  }
                },
                "required": [
                  "sceneId",
                  "nextSceneId",
                  "text"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Choice created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "sceneId": {
                      "type": "string"
                    },
                    "nextSceneId": {
                      "type": "string"
                    },
                    "text": {
                      "type": "string"
                    },
                    "isImplicit": {
                      "type": "boolean"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "sceneId",
                    "nextSceneId",
                    "text",
                    "isImplicit",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/choices/{id}": {
      "get": {
        "summary": "Get a choice by ID",
        "description": "Retrieves a single choice by its unique ID.",
        "tags": [
          "Choices"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Choice retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "sceneId": {
                      "type": "string"
                    },
                    "nextSceneId": {
                      "type": "string"
                    },
                    "text": {
                      "type": "string"
                    },
                    "isImplicit": {
                      "type": "boolean"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "sceneId",
                    "nextSceneId",
                    "text",
                    "isImplicit",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Choice not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a choice by ID",
        "description": "Updates an existing choice by its unique ID.",
        "tags": [
          "Choices"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "sceneId": {
                    "type": "string"
                  },
                  "nextSceneId": {
                    "type": "string"
                  },
                  "text": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "id"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Choice updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "sceneId": {
                      "type": "string"
                    },
                    "nextSceneId": {
                      "type": "string"
                    },
                    "text": {
                      "type": "string"
                    },
                    "isImplicit": {
                      "type": "boolean"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "sceneId",
                    "nextSceneId",
                    "text",
                    "isImplicit",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Choice not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Partially update a choice by ID",
        "description": "Partially updates an existing choice by its unique ID. Only provided fields will be updated.",
        "tags": [
          "Choices"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "sceneId": {
                    "type": "string"
                  },
                  "nextSceneId": {
                    "type": "string"
                  },
                  "text": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "id"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Choice updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "sceneId": {
                      "type": "string"
                    },
                    "nextSceneId": {
                      "type": "string"
                    },
                    "text": {
                      "type": "string"
                    },
                    "isImplicit": {
                      "type": "boolean"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "sceneId",
                    "nextSceneId",
                    "text",
                    "isImplicit",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Choice not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a choice by ID",
        "description": "Deletes a choice by its unique ID.",
        "tags": [
          "Choices"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "Choice deleted successfully"
          },
          "404": {
            "description": "Choice not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/choices/by-scene/{sceneId}": {
      "get": {
        "summary": "Get choices by scene ID",
        "description": "Retrieves all choices associated with a specific scene.",
        "tags": [
          "Choices"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "sceneId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Choices retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "sceneId": {
                        "type": "string"
                      },
                      "nextSceneId": {
                        "type": "string"
                      },
                      "text": {
                        "type": "string"
                      },
                      "isImplicit": {
                        "type": "boolean"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      }
                    },
                    "required": [
                      "id",
                      "sceneId",
                      "nextSceneId",
                      "text",
                      "isImplicit",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/choices/bulk-delete": {
      "post": {
        "summary": "Bulk delete choices",
        "description": "Deletes multiple choices by their IDs.",
        "tags": [
          "Choices"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "ulid"
                    }
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete operation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "successfulIds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "failedIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "reason"
                        ]
                      }
                    }
                  },
                  "required": [
                    "successfulIds",
                    "failedIds"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/world-rules": {
      "post": {
        "summary": "Create a new world rule",
        "description": "Creates a new world rule for a story.",
        "tags": [
          "World Rules"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "storyId": {
                    "type": "string",
                    "format": "ulid"
                  },
                  "title": {
                    "type": "string",
                    "minLength": 1
                  },
                  "description": {
                    "type": "string",
                    "nullable": true
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string",
                    "nullable": true
                  }
                },
                "required": [
                  "storyId",
                  "title"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "World Rule created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "storyId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "title": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "title",
                    "description",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/world-rules/{id}": {
      "get": {
        "summary": "Get a world rule by ID",
        "description": "Retrieves a single world rule by its unique ID.",
        "tags": [
          "World Rules"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "World Rule retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "storyId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "title": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "title",
                    "description",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "World Rule not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a world rule by ID",
        "description": "Updates an existing world rule by its unique ID.",
        "tags": [
          "World Rules"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 1
                  },
                  "description": {
                    "type": "string",
                    "nullable": true
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string",
                    "nullable": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "World Rule updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "storyId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "title": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "title",
                    "description",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "World Rule not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Partially update a world rule by ID",
        "description": "Partially updates an existing world rule by its unique ID. Only provided fields will be updated.",
        "tags": [
          "World Rules"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 1
                  },
                  "description": {
                    "type": "string",
                    "nullable": true
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string",
                    "nullable": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "World Rule updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "storyId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "title": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "title",
                    "description",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "World Rule not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a world rule by ID",
        "description": "Deletes a world rule by its unique ID.",
        "tags": [
          "World Rules"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "World Rule deleted successfully (No Content)"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "World Rule not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/world-rules/story/{storyId}": {
      "get": {
        "summary": "Get world rules by story ID",
        "description": "Retrieves all world rules associated with a specific story.",
        "tags": [
          "World Rules"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "storyId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "World Rules retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "storyId": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "title": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "title",
                          "description",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/world-rules/bulk-delete": {
      "post": {
        "summary": "Bulk delete world rules",
        "description": "Deletes multiple world rules by their IDs.",
        "tags": [
          "World Rules"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "ulid"
                    }
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete operation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "successfulIds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "failedIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "reason"
                        ]
                      }
                    }
                  },
                  "required": [
                    "successfulIds",
                    "failedIds"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/notes": {
      "post": {
        "summary": "Create a new note",
        "description": "Creates a new note for a story.",
        "tags": [
          "Notes"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "storyId": {
                    "type": "string",
                    "format": "ulid"
                  },
                  "title": {
                    "type": "string",
                    "minLength": 1
                  },
                  "body": {
                    "type": "string",
                    "nullable": true
                  },
                  "galleryId": {
                    "type": "string",
                    "nullable": true,
                    "format": "ulid"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  }
                },
                "required": [
                  "storyId",
                  "title"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Note created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "storyId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "title": {
                      "type": "string"
                    },
                    "body": {
                      "type": "string",
                      "nullable": true
                    },
                    "galleryId": {
                      "type": "string",
                      "nullable": true,
                      "format": "ulid"
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "title",
                    "body",
                    "galleryId",
                    "isFavorite",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/notes/{id}": {
      "get": {
        "summary": "Get a note by ID",
        "description": "Retrieves a single note by its unique ID.",
        "tags": [
          "Notes"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Note retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "storyId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "title": {
                      "type": "string"
                    },
                    "body": {
                      "type": "string",
                      "nullable": true
                    },
                    "galleryId": {
                      "type": "string",
                      "nullable": true,
                      "format": "ulid"
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "title",
                    "body",
                    "galleryId",
                    "isFavorite",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Note not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a note by ID",
        "description": "Updates an existing note by its unique ID.",
        "tags": [
          "Notes"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 1
                  },
                  "body": {
                    "type": "string",
                    "nullable": true
                  },
                  "galleryId": {
                    "type": "string",
                    "nullable": true,
                    "format": "ulid"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Note updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "storyId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "title": {
                      "type": "string"
                    },
                    "body": {
                      "type": "string",
                      "nullable": true
                    },
                    "galleryId": {
                      "type": "string",
                      "nullable": true,
                      "format": "ulid"
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "title",
                    "body",
                    "galleryId",
                    "isFavorite",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Note not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Partially update a note by ID",
        "description": "Partially updates an existing note by its unique ID. Only provided fields will be updated.",
        "tags": [
          "Notes"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 1
                  },
                  "body": {
                    "type": "string",
                    "nullable": true
                  },
                  "galleryId": {
                    "type": "string",
                    "nullable": true,
                    "format": "ulid"
                  },
                  "isFavorite": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Note updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "storyId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "title": {
                      "type": "string"
                    },
                    "body": {
                      "type": "string",
                      "nullable": true
                    },
                    "galleryId": {
                      "type": "string",
                      "nullable": true,
                      "format": "ulid"
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "title",
                    "body",
                    "galleryId",
                    "isFavorite",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Note not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a note by ID",
        "description": "Deletes a note by its unique ID.",
        "tags": [
          "Notes"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "Note deleted successfully (No Content)"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Note not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/notes/story/{storyId}": {
      "get": {
        "summary": "Get notes by story ID",
        "description": "Retrieves all notes associated with a specific story.",
        "tags": [
          "Notes"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "storyId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Notes retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "storyId": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "title": {
                            "type": "string"
                          },
                          "body": {
                            "type": "string",
                            "nullable": true
                          },
                          "galleryId": {
                            "type": "string",
                            "nullable": true,
                            "format": "ulid"
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "title",
                          "body",
                          "galleryId",
                          "isFavorite",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/notes/bulk-delete": {
      "post": {
        "summary": "Bulk delete notes",
        "description": "Deletes multiple notes by their IDs.",
        "tags": [
          "Notes"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "ulid"
                    }
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete operation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "successfulIds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "failedIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "reason"
                        ]
                      }
                    }
                  },
                  "required": [
                    "successfulIds",
                    "failedIds"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/tags": {
      "post": {
        "summary": "Create a new tag",
        "description": "Creates a new tag in a story.",
        "tags": [
          "Tags"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "storyId": {
                    "type": "string",
                    "format": "ulid"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "color": {
                    "type": "string",
                    "nullable": true
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string",
                    "nullable": true
                  }
                },
                "required": [
                  "storyId",
                  "name"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tag created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "storyId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "color": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "color",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/tags/{id}": {
      "get": {
        "summary": "Get a tag by ID",
        "description": "Retrieves a single tag by its unique ID.",
        "tags": [
          "Tags"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Tag retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "storyId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "color": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "color",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Tag not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a tag by ID",
        "description": "Updates an existing tag by its unique ID.",
        "tags": [
          "Tags"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "ulid"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "color": {
                    "type": "string",
                    "nullable": true
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string",
                    "nullable": true
                  }
                },
                "required": [
                  "id"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tag updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "storyId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "color": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "color",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Tag not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Partially update a tag by ID",
        "description": "Partially updates an existing tag by its unique ID. Only provided fields will be updated.",
        "tags": [
          "Tags"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "ulid"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "color": {
                    "type": "string",
                    "nullable": true
                  },
                  "isFavorite": {
                    "type": "boolean"
                  },
                  "extraNotes": {
                    "type": "string",
                    "nullable": true
                  }
                },
                "required": [
                  "id"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tag updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "storyId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "color": {
                      "type": "string",
                      "nullable": true
                    },
                    "isFavorite": {
                      "type": "boolean"
                    },
                    "extraNotes": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "storyId",
                    "name",
                    "color",
                    "isFavorite",
                    "extraNotes",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Tag not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a tag by ID",
        "description": "Deletes a tag by its unique ID.",
        "tags": [
          "Tags"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "Tag deleted successfully (No Content)"
          },
          "404": {
            "description": "Tag not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/tags/story/{storyId}": {
      "get": {
        "summary": "Get tags by story ID",
        "description": "Retrieves all tags belonging to a specific story.",
        "tags": [
          "Tags"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "storyId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Tags retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "storyId": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "name": {
                            "type": "string"
                          },
                          "color": {
                            "type": "string",
                            "nullable": true
                          },
                          "isFavorite": {
                            "type": "boolean"
                          },
                          "extraNotes": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "storyId",
                          "name",
                          "color",
                          "isFavorite",
                          "extraNotes",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Story not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/tags/add": {
      "post": {
        "summary": "Add a tag to an entity",
        "description": "Assigns a tag to a specified entity (Character, Location, Chapter, or Scene).",
        "tags": [
          "Tags"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "tagId": {
                    "type": "string",
                    "format": "ulid"
                  },
                  "targetType": {
                    "type": "string",
                    "enum": [
                      "Character",
                      "Location",
                      "Chapter",
                      "Scene"
                    ]
                  },
                  "targetId": {
                    "type": "string",
                    "format": "ulid"
                  }
                },
                "required": [
                  "tagId",
                  "targetType",
                  "targetId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tag added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/tags/remove": {
      "post": {
        "summary": "Remove a tag from an entity",
        "description": "Removes a tag from a specified entity (Character, Location, Chapter, or Scene).",
        "tags": [
          "Tags"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "tagId": {
                    "type": "string",
                    "format": "ulid"
                  },
                  "targetType": {
                    "type": "string",
                    "enum": [
                      "Character",
                      "Location",
                      "Chapter",
                      "Scene"
                    ]
                  },
                  "targetId": {
                    "type": "string",
                    "format": "ulid"
                  }
                },
                "required": [
                  "tagId",
                  "targetType",
                  "targetId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tag removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/tags/bulk-delete": {
      "post": {
        "summary": "Bulk delete tags",
        "description": "Deletes multiple tags by their IDs.",
        "tags": [
          "Tags"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "ulid"
                    }
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete operation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "successfulIds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "failedIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "reason"
                        ]
                      }
                    }
                  },
                  "required": [
                    "successfulIds",
                    "failedIds"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/suggestions": {
      "post": {
        "summary": "Create a new suggestion",
        "description": "Creates a new customizable list suggestion.",
        "tags": [
          "Suggestions"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": {
                    "type": "string",
                    "format": "ulid"
                  },
                  "scope": {
                    "anyOf": [
                      {
                        "type": "string",
                        "enum": [
                          "global"
                        ]
                      },
                      {
                        "type": "string",
                        "enum": [
                          "story"
                        ]
                      }
                    ]
                  },
                  "storyId": {
                    "type": "string",
                    "nullable": true,
                    "format": "ulid"
                  },
                  "type": {
                    "type": "string",
                    "minLength": 1
                  },
                  "value": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "userId",
                  "scope",
                  "type",
                  "value"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Suggestion created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "userId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "scope": {
                      "anyOf": [
                        {
                          "type": "string",
                          "enum": [
                            "global"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "story"
                          ]
                        }
                      ]
                    },
                    "storyId": {
                      "type": "string",
                      "nullable": true,
                      "format": "ulid"
                    },
                    "type": {
                      "type": "string"
                    },
                    "value": {
                      "type": "string"
                    },
                    "isDefault": {
                      "type": "boolean"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "userId",
                    "scope",
                    "storyId",
                    "type",
                    "value",
                    "isDefault",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/suggestions/batch": {
      "post": {
        "summary": "Create multiple suggestions",
        "description": "Creates multiple customizable list suggestions in a single request.",
        "tags": [
          "Suggestions"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "userId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "scope": {
                      "anyOf": [
                        {
                          "type": "string",
                          "enum": [
                            "global"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "story"
                          ]
                        }
                      ]
                    },
                    "storyId": {
                      "type": "string",
                      "nullable": true,
                      "format": "ulid"
                    },
                    "type": {
                      "type": "string",
                      "minLength": 1
                    },
                    "value": {
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": [
                    "userId",
                    "scope",
                    "type",
                    "value"
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Suggestions created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "ulid"
                      },
                      "userId": {
                        "type": "string",
                        "format": "ulid"
                      },
                      "scope": {
                        "anyOf": [
                          {
                            "type": "string",
                            "enum": [
                              "global"
                            ]
                          },
                          {
                            "type": "string",
                            "enum": [
                              "story"
                            ]
                          }
                        ]
                      },
                      "storyId": {
                        "type": "string",
                        "nullable": true,
                        "format": "ulid"
                      },
                      "type": {
                        "type": "string"
                      },
                      "value": {
                        "type": "string"
                      },
                      "isDefault": {
                        "type": "boolean"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      }
                    },
                    "required": [
                      "id",
                      "userId",
                      "scope",
                      "storyId",
                      "type",
                      "value",
                      "isDefault",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update multiple suggestions",
        "description": "Updates multiple suggestions in a single request.",
        "tags": [
          "Suggestions"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "scope": {
                      "anyOf": [
                        {
                          "type": "string",
                          "enum": [
                            "global"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "story"
                          ]
                        }
                      ]
                    },
                    "storyId": {
                      "type": "string",
                      "nullable": true,
                      "format": "ulid"
                    },
                    "type": {
                      "type": "string",
                      "minLength": 1
                    },
                    "value": {
                      "type": "string",
                      "minLength": 1
                    },
                    "id": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id"
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Suggestions updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "ulid"
                      },
                      "userId": {
                        "type": "string",
                        "format": "ulid"
                      },
                      "scope": {
                        "anyOf": [
                          {
                            "type": "string",
                            "enum": [
                              "global"
                            ]
                          },
                          {
                            "type": "string",
                            "enum": [
                              "story"
                            ]
                          }
                        ]
                      },
                      "storyId": {
                        "type": "string",
                        "nullable": true,
                        "format": "ulid"
                      },
                      "type": {
                        "type": "string"
                      },
                      "value": {
                        "type": "string"
                      },
                      "isDefault": {
                        "type": "boolean"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date"
                      }
                    },
                    "required": [
                      "id",
                      "userId",
                      "scope",
                      "storyId",
                      "type",
                      "value",
                      "isDefault",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Suggestion not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/suggestions/{id}": {
      "get": {
        "summary": "Get a suggestion by ID",
        "description": "Retrieves a single suggestion by its unique ID.",
        "tags": [
          "Suggestions"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Suggestion retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "userId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "scope": {
                      "anyOf": [
                        {
                          "type": "string",
                          "enum": [
                            "global"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "story"
                          ]
                        }
                      ]
                    },
                    "storyId": {
                      "type": "string",
                      "nullable": true,
                      "format": "ulid"
                    },
                    "type": {
                      "type": "string"
                    },
                    "value": {
                      "type": "string"
                    },
                    "isDefault": {
                      "type": "boolean"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "userId",
                    "scope",
                    "storyId",
                    "type",
                    "value",
                    "isDefault",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Suggestion not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a suggestion by ID",
        "description": "Updates an existing suggestion by its unique ID.",
        "tags": [
          "Suggestions"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "scope": {
                    "anyOf": [
                      {
                        "type": "string",
                        "enum": [
                          "global"
                        ]
                      },
                      {
                        "type": "string",
                        "enum": [
                          "story"
                        ]
                      }
                    ]
                  },
                  "storyId": {
                    "type": "string",
                    "nullable": true,
                    "format": "ulid"
                  },
                  "type": {
                    "type": "string",
                    "minLength": 1
                  },
                  "value": {
                    "type": "string",
                    "minLength": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Suggestion updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "userId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "scope": {
                      "anyOf": [
                        {
                          "type": "string",
                          "enum": [
                            "global"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "story"
                          ]
                        }
                      ]
                    },
                    "storyId": {
                      "type": "string",
                      "nullable": true,
                      "format": "ulid"
                    },
                    "type": {
                      "type": "string"
                    },
                    "value": {
                      "type": "string"
                    },
                    "isDefault": {
                      "type": "boolean"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "userId",
                    "scope",
                    "storyId",
                    "type",
                    "value",
                    "isDefault",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Suggestion not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Partially update a suggestion by ID",
        "description": "Partially updates an existing suggestion by its unique ID. Only provided fields will be updated.",
        "tags": [
          "Suggestions"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "scope": {
                    "anyOf": [
                      {
                        "type": "string",
                        "enum": [
                          "global"
                        ]
                      },
                      {
                        "type": "string",
                        "enum": [
                          "story"
                        ]
                      }
                    ]
                  },
                  "storyId": {
                    "type": "string",
                    "nullable": true,
                    "format": "ulid"
                  },
                  "type": {
                    "type": "string",
                    "minLength": 1
                  },
                  "value": {
                    "type": "string",
                    "minLength": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Suggestion updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "userId": {
                      "type": "string",
                      "format": "ulid"
                    },
                    "scope": {
                      "anyOf": [
                        {
                          "type": "string",
                          "enum": [
                            "global"
                          ]
                        },
                        {
                          "type": "string",
                          "enum": [
                            "story"
                          ]
                        }
                      ]
                    },
                    "storyId": {
                      "type": "string",
                      "nullable": true,
                      "format": "ulid"
                    },
                    "type": {
                      "type": "string"
                    },
                    "value": {
                      "type": "string"
                    },
                    "isDefault": {
                      "type": "boolean"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "id",
                    "userId",
                    "scope",
                    "storyId",
                    "type",
                    "value",
                    "isDefault",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Suggestion not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a suggestion by ID",
        "description": "Deletes a suggestion by its unique ID.",
        "tags": [
          "Suggestions"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "Suggestion deleted successfully (No Content)"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Suggestion not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/suggestions/user/{userId}": {
      "get": {
        "summary": "Get suggestions by user ID",
        "description": "Retrieves all suggestions associated with a specific user.",
        "tags": [
          "Suggestions"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "userId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Suggestions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "userId": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "scope": {
                            "anyOf": [
                              {
                                "type": "string",
                                "enum": [
                                  "global"
                                ]
                              },
                              {
                                "type": "string",
                                "enum": [
                                  "story"
                                ]
                              }
                            ]
                          },
                          "storyId": {
                            "type": "string",
                            "nullable": true,
                            "format": "ulid"
                          },
                          "type": {
                            "type": "string"
                          },
                          "value": {
                            "type": "string"
                          },
                          "isDefault": {
                            "type": "boolean"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "userId",
                          "scope",
                          "storyId",
                          "type",
                          "value",
                          "isDefault",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/suggestions/story/{storyId}": {
      "get": {
        "summary": "Get suggestions by story ID",
        "description": "Retrieves all suggestions associated with a specific story.",
        "tags": [
          "Suggestions"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "storyId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Suggestions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "userId": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "scope": {
                            "anyOf": [
                              {
                                "type": "string",
                                "enum": [
                                  "global"
                                ]
                              },
                              {
                                "type": "string",
                                "enum": [
                                  "story"
                                ]
                              }
                            ]
                          },
                          "storyId": {
                            "type": "string",
                            "nullable": true,
                            "format": "ulid"
                          },
                          "type": {
                            "type": "string"
                          },
                          "value": {
                            "type": "string"
                          },
                          "isDefault": {
                            "type": "boolean"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "userId",
                          "scope",
                          "storyId",
                          "type",
                          "value",
                          "isDefault",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/suggestions/type/{type}": {
      "get": {
        "summary": "Get suggestions by type",
        "description": "Retrieves all suggestions of a specific type (e.g., \"genre\", \"character_gender\").",
        "tags": [
          "Suggestions"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "type",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Suggestions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "userId": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "scope": {
                            "anyOf": [
                              {
                                "type": "string",
                                "enum": [
                                  "global"
                                ]
                              },
                              {
                                "type": "string",
                                "enum": [
                                  "story"
                                ]
                              }
                            ]
                          },
                          "storyId": {
                            "type": "string",
                            "nullable": true,
                            "format": "ulid"
                          },
                          "type": {
                            "type": "string"
                          },
                          "value": {
                            "type": "string"
                          },
                          "isDefault": {
                            "type": "boolean"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "userId",
                          "scope",
                          "storyId",
                          "type",
                          "value",
                          "isDefault",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/suggestions/user/{userId}/type/{type}": {
      "get": {
        "summary": "Get suggestions by user ID and type",
        "description": "Retrieves all suggestions associated with a specific user and type.",
        "tags": [
          "Suggestions"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "userId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "type",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Suggestions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "userId": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "scope": {
                            "anyOf": [
                              {
                                "type": "string",
                                "enum": [
                                  "global"
                                ]
                              },
                              {
                                "type": "string",
                                "enum": [
                                  "story"
                                ]
                              }
                            ]
                          },
                          "storyId": {
                            "type": "string",
                            "nullable": true,
                            "format": "ulid"
                          },
                          "type": {
                            "type": "string"
                          },
                          "value": {
                            "type": "string"
                          },
                          "isDefault": {
                            "type": "boolean"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "userId",
                          "scope",
                          "storyId",
                          "type",
                          "value",
                          "isDefault",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/suggestions/story/{storyId}/type/{type}": {
      "get": {
        "summary": "Get suggestions by story ID and type",
        "description": "Retrieves all suggestions associated with a specific story and type.",
        "tags": [
          "Suggestions"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "ulid"
            },
            "required": true,
            "name": "storyId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "type",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 100
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "id"
            },
            "required": false,
            "name": "sort_by",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isFavorite",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "hasTags",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Suggestions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "userId": {
                            "type": "string",
                            "format": "ulid"
                          },
                          "scope": {
                            "anyOf": [
                              {
                                "type": "string",
                                "enum": [
                                  "global"
                                ]
                              },
                              {
                                "type": "string",
                                "enum": [
                                  "story"
                                ]
                              }
                            ]
                          },
                          "storyId": {
                            "type": "string",
                            "nullable": true,
                            "format": "ulid"
                          },
                          "type": {
                            "type": "string"
                          },
                          "value": {
                            "type": "string"
                          },
                          "isDefault": {
                            "type": "boolean"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "required": [
                          "id",
                          "userId",
                          "scope",
                          "storyId",
                          "type",
                          "value",
                          "isDefault",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "totalItems": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalItems"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/suggestions/bulk-delete": {
      "post": {
        "summary": "Bulk delete suggestions",
        "description": "Deletes multiple suggestions by their IDs.",
        "tags": [
          "Suggestions"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "ulid"
                    }
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete operation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "successfulIds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "failedIds": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "reason"
                        ]
                      }
                    }
                  },
                  "required": [
                    "successfulIds",
                    "failedIds"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/search": {
      "get": {
        "summary": "Global search across entities",
        "description": "Searches for a keyword across specified entities.",
        "tags": [
          "Search"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1
            },
            "required": true,
            "name": "query",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "scope",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Search results retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "type": {
                        "type": "string"
                      },
                      "data": {
                        "nullable": true
                      }
                    },
                    "required": [
                      "type"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    }
  }
}